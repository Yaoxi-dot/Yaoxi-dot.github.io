<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾…åŠäº‹é¡¹åˆ—è¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            letter-spacing: -0.3px;
        }

        /* é­”æ³•æ£’å…‰æ ‡ - å…¨å±€ä½¿ç”¨ */
        * {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40" viewBox="0 0 32 40"><defs><filter id="magicGlow3"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><path d="M16 2 L18 6 L22 4 L20 8 L24 9 L20 10 L22 14 L18 12 L16 16 L14 12 L10 14 L12 10 L8 9 L12 8 L10 4 L14 6 Z" fill="%23FFB6D9" filter="url(%23magicGlow3)"/><rect x="14" y="16" width="4" height="20" rx="2" fill="%23FF8CC8" filter="url(%23magicGlow3)"/><circle cx="16" cy="8" r="2.5" fill="%23FFD700" filter="url(%23magicGlow3)"/><circle cx="16" cy="8" r="1" fill="%23FFF"/></svg>') 16 16, auto;
        }

        /* è¾“å…¥æ¡†ä½¿ç”¨æ–‡æœ¬å…‰æ ‡ï¼ˆé­”æ³•æ£’ï¼‰ */
        input[type="text"], textarea {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40" viewBox="0 0 32 40"><defs><filter id="magicGlow3"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><path d="M16 2 L18 6 L22 4 L20 8 L24 9 L20 10 L22 14 L18 12 L16 16 L14 12 L10 14 L12 10 L8 9 L12 8 L10 4 L14 6 Z" fill="%23FFB6D9" filter="url(%23magicGlow3)"/><rect x="14" y="16" width="4" height="20" rx="2" fill="%23FF8CC8" filter="url(%23magicGlow3)"/><circle cx="16" cy="8" r="2.5" fill="%23FFD700" filter="url(%23magicGlow3)"/><circle cx="16" cy="8" r="1" fill="%23FFF"/></svg>') 16 16, text;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        /* 3Dç¿»è½¬å¡ç‰‡ */
        .flip-card-container {
            margin-bottom: 30px;
            perspective: 1000px;
        }

        .flip-card {
            width: 100%;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .flip-card:hover {
            transform: scale(1.02);
        }

        .flip-card.flipped:hover {
            transform: rotateY(180deg) scale(1.02);
        }

        .flip-card.flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px 20px;
            box-sizing: border-box;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15), 
                        0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            transition: box-shadow 0.3s ease;
            overflow: hidden;
        }

        .flip-card-front:hover,
        .flip-card-back:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2),
                        0 0 0 1px rgba(255, 255, 255, 0.2) inset,
                        0 0 30px rgba(255, 182, 217, 0.3);
        }

        .flip-card-front {
            background: linear-gradient(135deg, #FFB6D9 0%, #FF8CC8 100%);
            color: white;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #87D4FF 0%, #4AB3FF 100%);
            color: white;
            transform: rotateY(180deg);
        }

        .flip-card-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: float 2s ease-in-out infinite;
        }

        .flip-card-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
            letter-spacing: 0;
            width: 100%;
        }

        .flip-card-content {
            font-size: 0.75rem;
            text-align: center;
            opacity: 0.95;
            padding: 0 15px;
            width: 100%;
            box-sizing: border-box;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 4px 8px;
            align-items: center;
            justify-content: center;
            margin: 0;
        }

        .tip-item {
            line-height: 1.2;
            padding: 1px 0;
            letter-spacing: -0.2px;
            width: calc(50% - 4px);
            text-align: left;
            margin: 0;
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.75rem;
        }

        .flip-card-hint {
            position: absolute;
            bottom: 10px;
            font-size: 0.85rem;
            opacity: 0.8;
            animation: pulse-hint 2s ease-in-out infinite;
        }

        @keyframes pulse-hint {
            0%, 100% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        h1 {
            color: #4AB3FF;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2rem;
            letter-spacing: -0.5px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        #todoInput {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #FFB6D9;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        #todoInput:focus {
            border-color: #87D4FF;
            box-shadow: 0 0 0 3px rgba(135, 212, 255, 0.2);
        }

        #addButton {
            padding: 12px 30px;
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #addButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 182, 217, 0.4);
        }

        #addButton:active {
            transform: translateY(0);
        }

        #todoList {
            list-style: none;
        }

        #todoList li {
            background: #f8f9fa;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInUp 0.3s ease;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        #todoList li:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        /* å®ŒæˆçŠ¶æ€çš„æ ·å¼ */
        #todoList li.completed {
            background: #e8f5e9;
            opacity: 0.7;
        }

        #todoList li.completed .todo-text {
            text-decoration: line-through;
            color: #66bb6a;
            font-style: italic;
        }

        .todo-text {
            flex: 1;
            margin-right: 10px;
            transition: all 0.3s ease;
            letter-spacing: -0.2px;
        }

        #todoList li:last-child {
            margin-bottom: 0;
        }

        .empty-message {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-style: italic;
        }

        /* åº†ç¥åŠ¨ç”» */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10000;
            pointer-events: none;
        }

        .celebration-text {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 50%, #FFB6D9 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: celebration-bounce 1s ease, gradient-shift 2s ease infinite;
            text-align: center;
            white-space: nowrap;
        }

        @keyframes celebration-bounce {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(180deg);
            }
            100% {
                transform: scale(1) rotate(360deg);
                opacity: 1;
            }
        }

        @keyframes gradient-shift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        /* å½©çº¸æ•ˆæœ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #FFB6D9;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* ä»»åŠ¡å®Œæˆæ—¶çš„ç‰¹æ®ŠåŠ¨ç”» */
        #todoList li.completed {
            animation: complete-bounce 0.5s ease;
        }

        @keyframes complete-bounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 182, 217, 0.1) 0%, rgba(135, 212, 255, 0.1) 100%);
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            letter-spacing: -0.2px;
        }

        /* è¾“å…¥æ¡†åŠ¨ç”»å¢å¼º */
        #todoInput.shake {
            animation: shake-input 0.5s ease;
        }

        @keyframes shake-input {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-10px);
            }
            75% {
                transform: translateX(10px);
            }
        }

        /* æŒ‰é’®ç‚¹å‡»æ•ˆæœå¢å¼º */
        #addButton.clicked {
            animation: button-pulse 0.3s ease;
        }

        @keyframes button-pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }

        /* ä»»åŠ¡é¡¹æ‹–æ‹½æç¤º */
        #todoList li.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        /* ç©ºæ¶ˆæ¯åŠ¨ç”» */
        .empty-message {
            animation: fade-in-out 2s ease-in-out infinite;
        }

        @keyframes fade-in-out {
            0%, 100% {
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
        }

        /* æœç´¢æ¡†æ ·å¼ */
        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        #searchInput {
            width: 100%;
            padding: 12px 40px 12px 20px;
            border: 2px solid #FFB6D9;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        #searchInput:focus {
            border-color: #87D4FF;
            box-shadow: 0 0 0 3px rgba(135, 212, 255, 0.2);
        }

        #searchInput::placeholder {
            color: #999;
        }

        .clear-search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #ccc;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s ease;
            padding: 0;
        }

        .clear-search-btn:hover {
            background: #999;
            transform: translateY(-50%) scale(1.1);
        }

        /* æœç´¢ç»“æœé«˜äº® */
        .highlight {
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        /* è¿‡æ»¤éšè—çš„é¡¹ç›® */
        #todoList li.filtered-out {
            display: none;
        }

        /* æ— æœç´¢ç»“æœæç¤º */
        .no-results {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-style: italic;
            display: none;
        }

        .no-results.show {
            display: block;
        }

        /* å¼¹çª—æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100000;
            animation: fadeIn 0.3s ease;
            pointer-events: auto;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 0;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
            overflow: hidden;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            padding: 20px;
            text-align: center;
        }

        .modal-header h3 {
            color: white;
            margin: 0;
            font-size: 1.3rem;
        }

        .modal-body {
            padding: 30px 20px;
            text-align: center;
        }

        .modal-body p {
            color: #333;
            font-size: 1.1rem;
            line-height: 1.6;
            margin: 0;
        }

        #searchTermText {
            color: #4AB3FF;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .modal-footer {
            padding: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 150px;
        }

        .modal-btn-yes {
            background: linear-gradient(135deg, #FFB6D9 0%, #87D4FF 100%);
            color: white;
        }

        .modal-btn-yes:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 182, 217, 0.4);
        }

        .modal-btn-no {
            background: #e9ecef;
            color: #666;
        }

        .modal-btn-no:hover {
            background: #dee2e6;
            transform: translateY(-2px);
        }

        .modal-btn:active {
            transform: translateY(0);
        }

        /* é¼ æ ‡è¿½è¸ªç‰¹æ•ˆ */
        .cursor-trail {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: screen;
            animation: sparkle-fade 1s ease-out forwards;
        }

        @keyframes sparkle-fade {
            0% {
                opacity: 1;
                transform: scale(1) translate(-50%, -50%);
            }
            100% {
                opacity: 0;
                transform: scale(0) translate(-50%, -50%);
            }
        }

        /* æ˜Ÿæ˜Ÿç‰¹æ•ˆ */
        .sparkle-star {
            position: fixed;
            width: 6px;
            height: 6px;
            pointer-events: none;
            z-index: 9998;
            animation: star-sparkle 0.8s ease-out forwards;
        }

        @keyframes star-sparkle {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }

        /* å…‰ç‚¹ç²’å­ */
        .sparkle-particle {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9997;
            animation: particle-float 1.5s ease-out forwards;
        }

        @keyframes particle-float {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--dx), var(--dy)) scale(0);
            }
        }

        /* å½©è™¹è½¨è¿¹ */
        .rainbow-trail {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9996;
            background: radial-gradient(circle, rgba(255, 182, 217, 0.8) 0%, rgba(135, 212, 255, 0.8) 100%);
            animation: rainbow-trail-fade 0.6s ease-out forwards;
            filter: blur(5px);
        }

        @keyframes rainbow-trail-fade {
            0% {
                opacity: 0.8;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(2);
            }
        }

        /* é—ªçƒæ˜Ÿæ˜Ÿ */
        .twinkle-star {
            position: fixed;
            font-size: 16px;
            pointer-events: none;
            z-index: 9995;
            animation: twinkle 1s ease-out forwards;
        }

        @keyframes twinkle {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }

        /* ç‚¹å‡»æ—¶çš„ç²‰è‰²é€æ˜æ°”æ³¡ */
        .click-bubble {
            position: fixed;
            pointer-events: none;
            z-index: 99999;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 182, 217, 0.6) 0%, rgba(255, 140, 200, 0.3) 50%, transparent 100%);
            border: 2px solid rgba(255, 182, 217, 0.8);
            animation: bubble-rise 1s ease-out forwards;
        }

        @keyframes bubble-rise {
            0% {
                width: 20px;
                height: 20px;
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                width: 40px;
                height: 40px;
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1.2);
            }
            100% {
                width: 60px;
                height: 60px;
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.5) translateY(-30px);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 480px) {
            .container {
                padding: 30px 20px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .input-group {
                flex-direction: column;
            }

            #addButton {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ å¾…åŠäº‹é¡¹</h1>
        
        <!-- 3Dç¿»è½¬å¡ç‰‡ -->
        <div class="flip-card-container">
            <div class="flip-card" id="flipCard">
                <div class="flip-card-front">
                    <div class="flip-card-icon">âœ¨</div>
                    <div class="flip-card-title">é­”æ³•å¾…åŠæ¸…å•</div>
                    <div class="flip-card-content">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹èƒŒé¢å†…å®¹</div>
                    <div class="flip-card-hint">ğŸ‘† ç‚¹å‡»ç¿»è½¬</div>
                </div>
                <div class="flip-card-back">
                    <div class="flip-card-icon">ğŸ¯</div>
                    <div class="flip-card-title">ä½¿ç”¨æç¤º</div>
                    <div class="flip-card-content">
                        <div class="tip-item">â€¢ è¾“å…¥ä»»åŠ¡å¹¶ç‚¹å‡»æ·»åŠ </div>
                        <div class="tip-item">â€¢ ç‚¹å‡»ä»»åŠ¡æ ‡è®°ä¸ºå®Œæˆ</div>
                        <div class="tip-item">â€¢ åŒå‡»ä»»åŠ¡å¯ä»¥ç¼–è¾‘</div>
                        <div class="tip-item">â€¢ ä½¿ç”¨æœç´¢å¿«é€ŸæŸ¥æ‰¾</div>
                    </div>
                    <div class="flip-card-hint">ğŸ‘† å†æ¬¡ç‚¹å‡»ç¿»è½¬</div>
                </div>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalCount">0</div>
                <div class="stat-label">æ€»è®¡</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="completedCount">0</div>
                <div class="stat-label">å·²å®Œæˆ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="pendingCount">0</div>
                <div class="stat-label">å¾…å®Œæˆ</div>
            </div>
        </div>
        
        <!-- æœç´¢æ¡† -->
        <div class="search-container">
            <input 
                type="text" 
                id="searchInput" 
                placeholder="ğŸ” æœç´¢å¾…åŠäº‹é¡¹..."
                autocomplete="off"
            >
            <button id="clearSearch" class="clear-search-btn" style="display: none;">âœ•</button>
        </div>
        
        <div class="input-group">
            <input 
                type="text" 
                id="todoInput" 
                placeholder="è¾“å…¥å¾…åŠäº‹é¡¹..."
                autocomplete="off"
            >
            <button id="addButton">æ·»åŠ </button>
        </div>
        
        <ul id="todoList">
            <li class="empty-message">æš‚æ— å¾…åŠäº‹é¡¹ï¼Œæ·»åŠ ä¸€ä¸ªå§ï½</li>
        </ul>
        
        <!-- æ— æœç´¢ç»“æœæç¤º -->
        <div class="no-results" id="noResults">
            ğŸ” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ä»»åŠ¡
        </div>
        
        <!-- æ·»åŠ å¾…åŠå¼¹çª— -->
        <div class="modal-overlay" id="addTodoModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ’¡ æœªæ‰¾åˆ°åŒ¹é…çš„ä»»åŠ¡</h3>
                </div>
                <div class="modal-body">
                    <p>æ˜¯å¦å°† "<span id="searchTermText"></span>" æ·»åŠ ä¸ºæ–°çš„å¾…åŠäº‹é¡¹ï¼Ÿ</p>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn modal-btn-yes" id="confirmAdd">æ˜¯ï¼Œæ·»åŠ </button>
                    <button class="modal-btn modal-btn-no" id="cancelAdd">å¦ï¼Œå–æ¶ˆ</button>
                </div>
            </div>
        </div>
        
        <!-- åˆ é™¤ç¡®è®¤å¼¹çª— -->
        <div class="modal-overlay" id="deleteTodoModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>âš ï¸ ç¡®è®¤åˆ é™¤</h3>
                </div>
                <div class="modal-body">
                    <p>ç¡®å®šè¦åˆ é™¤å¾…åŠäº‹é¡¹ "<span id="deleteTodoText"></span>" å—ï¼Ÿ</p>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn modal-btn-yes" id="confirmDelete">æ˜¯ï¼Œåˆ é™¤</button>
                    <button class="modal-btn modal-btn-no" id="cancelDelete">å¦ï¼Œå–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è·å–DOMå…ƒç´ 
        const todoInput = document.getElementById('todoInput');
        const addButton = document.getElementById('addButton');
        const todoList = document.getElementById('todoList');
        const totalCount = document.getElementById('totalCount');
        const completedCount = document.getElementById('completedCount');
        const pendingCount = document.getElementById('pendingCount');
        const searchInput = document.getElementById('searchInput');
        const clearSearchBtn = document.getElementById('clearSearch');
        const noResults = document.getElementById('noResults');
        const addTodoModal = document.getElementById('addTodoModal');
        const searchTermText = document.getElementById('searchTermText');
        const confirmAddBtn = document.getElementById('confirmAdd');
        const cancelAddBtn = document.getElementById('cancelAdd');
        const flipCard = document.getElementById('flipCard');
        const deleteTodoModal = document.getElementById('deleteTodoModal');
        const deleteTodoText = document.getElementById('deleteTodoText');
        const confirmDeleteBtn = document.getElementById('confirmDelete');
        const cancelDeleteBtn = document.getElementById('cancelDelete');
        
        let pendingSearchTerm = ''; // å­˜å‚¨å¾…æ·»åŠ çš„æœç´¢å…³é”®è¯
        let pendingDeleteItem = null; // å­˜å‚¨å¾…åˆ é™¤çš„åˆ—è¡¨é¡¹
        const STORAGE_KEY = 'todoListItems'; // localStorageé”®å

        // ========== æœ¬åœ°å­˜å‚¨åŠŸèƒ½ ==========
        
        // ä¿å­˜å¾…åŠäº‹é¡¹åˆ°localStorage
        function saveTodos() {
            const items = [];
            const allItems = todoList.querySelectorAll('li:not(.empty-message)');
            
            allItems.forEach(item => {
                const todoText = item.querySelector('.todo-text');
                if (todoText) {
                    items.push({
                        text: todoText.textContent, // ä½¿ç”¨textContentè·å–çº¯æ–‡æœ¬ï¼Œé¿å…HTMLæ ‡ç­¾
                        completed: item.classList.contains('completed')
                    });
                }
            });
            
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
            } catch (e) {
                console.error('ä¿å­˜å¤±è´¥:', e);
            }
        }
        
        // ä»localStorageåŠ è½½å¾…åŠäº‹é¡¹
        function loadTodos() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (!saved) return;
                
                const items = JSON.parse(saved);
                if (!Array.isArray(items) || items.length === 0) return;
                
                // æ¸…é™¤å½“å‰åˆ—è¡¨ï¼ˆä¿ç•™ç©ºæ¶ˆæ¯ï¼‰
                const emptyMessage = todoList.querySelector('.empty-message');
                todoList.innerHTML = '';
                if (emptyMessage) {
                    todoList.appendChild(emptyMessage);
                }
                
                // æ¢å¤æ¯ä¸ªå¾…åŠäº‹é¡¹
                items.forEach(item => {
                    createTodoItemFromData(item.text, item.completed, false); // falseè¡¨ç¤ºä¸ä¿å­˜ï¼ˆå› ä¸ºæœ€åä¼šç»Ÿä¸€ä¿å­˜ï¼‰
                });
                
                // æ›´æ–°ç»Ÿè®¡
                updateStats();
            } catch (e) {
                console.error('åŠ è½½å¤±è´¥:', e);
            }
        }
        
        // ä»æ•°æ®åˆ›å»ºå¾…åŠäº‹é¡¹ï¼ˆç”¨äºåŠ è½½ï¼‰
        function createTodoItemFromData(text, completed, shouldSave = true) {
            // ç§»é™¤ç©ºåˆ—è¡¨æç¤ºï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            const emptyMessage = todoList.querySelector('.empty-message');
            if (emptyMessage) {
                emptyMessage.remove();
            }
            
            // åˆ›å»ºæ–°çš„åˆ—è¡¨é¡¹
            const listItem = document.createElement('li');
            listItem.draggable = true;
            
            // å¦‚æœå·²å®Œæˆï¼Œæ·»åŠ completedç±»
            if (completed) {
                listItem.classList.add('completed');
            }
            
            // åˆ›å»ºæ–‡æœ¬å…ƒç´ 
            const todoText = document.createElement('span');
            todoText.className = 'todo-text';
            todoText.textContent = text;
            listItem.appendChild(todoText);
            
            // ç‚¹å‡»åˆ—è¡¨é¡¹åˆ‡æ¢å®ŒæˆçŠ¶æ€
            listItem.addEventListener('click', function(e) {
                if (e.target.tagName === 'BUTTON') {
                    return;
                }
                
                const wasCompleted = this.classList.contains('completed');
                this.classList.toggle('completed');
                
                if (!wasCompleted && this.classList.contains('completed')) {
                    celebrateCompletion(this);
                }
                
                updateStats();
                saveTodos(); // ä¿å­˜çŠ¶æ€
            });
            
            // æ·»åŠ åˆ é™¤æŒ‰é’®
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'åˆ é™¤';
            deleteButton.style.cssText = `
                background: #ff6b6b;
                color: white;
                border: none;
                padding: 5px 15px;
                border-radius: 15px;
                cursor: pointer;
                font-size: 12px;
                transition: all 0.3s ease;
            `;
            
            deleteButton.addEventListener('mouseenter', function() {
                this.style.background = '#ff5252';
                this.style.transform = 'scale(1.05)';
            });
            
            deleteButton.addEventListener('mouseleave', function() {
                this.style.background = '#ff6b6b';
                this.style.transform = 'scale(1)';
            });
            
            deleteButton.addEventListener('click', function(e) {
                e.stopPropagation();
                e.preventDefault();
                showDeleteModal(listItem);
            });
            
            listItem.appendChild(deleteButton);
            
            // å°†æ–°é¡¹æ·»åŠ åˆ°åˆ—è¡¨
            todoList.appendChild(listItem);
            
            if (shouldSave) {
                updateStats();
                saveTodos();
            }
        }

        // 3Då¡ç‰‡ç¿»è½¬åŠŸèƒ½
        flipCard.addEventListener('click', function() {
            this.classList.toggle('flipped');
        });

        // åº†ç¥è¯­æ•°ç»„
        const celebrationMessages = [
            'ğŸ‰ å¤ªæ£’äº†ï¼',
            'âœ¨ å®Œæˆå¾—å¥½ï¼',
            'ğŸŒŸ ä½ çœŸå‰å®³ï¼',
            'ğŸ’ª ç»§ç»­åŠ æ²¹ï¼',
            'ğŸŠ å¹²å¾—æ¼‚äº®ï¼',
            'ğŸ‘ åšå¾—å¥½ï¼',
            'ğŸš€ æ£’æäº†ï¼',
            'ğŸ’¯ å®Œç¾ï¼',
            'ğŸˆ å¤ªå¥½äº†ï¼',
            'ğŸ† ä¼˜ç§€ï¼'
        ];

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const allItems = todoList.querySelectorAll('li:not(.empty-message)');
            const completedItems = todoList.querySelectorAll('li.completed');
            
            totalCount.textContent = allItems.length;
            completedCount.textContent = completedItems.length;
            pendingCount.textContent = allItems.length - completedItems.length;
            
            // æ·»åŠ æ•°å­—å˜åŒ–åŠ¨ç”»
            [totalCount, completedCount, pendingCount].forEach(el => {
                el.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    el.style.transform = 'scale(1)';
                }, 200);
            });
        }

        // åˆ›å»ºåº†ç¥æ•ˆæœ
        function showCelebration() {
            // éšæœºé€‰æ‹©åº†ç¥è¯­
            const message = celebrationMessages[Math.floor(Math.random() * celebrationMessages.length)];
            
            // åˆ›å»ºåº†ç¥æ–‡å­—
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.innerHTML = `<div class="celebration-text">${message}</div>`;
            document.body.appendChild(celebration);
            
            // åˆ›å»ºå½©çº¸æ•ˆæœ
            createConfetti();
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                celebration.style.opacity = '0';
                celebration.style.transform = 'translate(-50%, -50%) scale(0.5)';
                celebration.style.transition = 'all 0.5s ease';
                setTimeout(() => {
                    celebration.remove();
                }, 500);
            }, 2000);
        }

        // åˆ›å»ºå½©çº¸æ•ˆæœ
        function createConfetti() {
            const colors = ['#FFB6D9', '#87D4FF', '#FF8CC8', '#4AB3FF', '#FFD700', '#FF6BB5'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 20);
            }
        }

        // æ·»åŠ ä»»åŠ¡å®Œæˆæ—¶çš„ç‰¹æ®Šæ•ˆæœ
        function celebrateCompletion(listItem) {
            // æ˜¾ç¤ºåº†ç¥
            showCelebration();
            
            // æ·»åŠ å®ŒæˆåŠ¨ç”»
            listItem.style.animation = 'complete-bounce 0.5s ease';
            
            // æ·»åŠ ç²’å­æ•ˆæœ
            createParticles(listItem);
        }

        // åˆ›å»ºç²’å­æ•ˆæœ
        function createParticles(element) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                particle.style.width = '6px';
                particle.style.height = '6px';
                particle.style.background = ['#FFB6D9', '#87D4FF', '#FF8CC8'][Math.floor(Math.random() * 3)];
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '9999';
                
                const angle = (Math.PI * 2 * i) / 20;
                const velocity = 100 + Math.random() * 50;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                document.body.appendChild(particle);
                
                let x = centerX;
                let y = centerY;
                let opacity = 1;
                
                const animate = () => {
                    x += vx * 0.1;
                    y += vy * 0.1;
                    opacity -= 0.02;
                    
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.opacity = opacity;
                    
                    if (opacity > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        particle.remove();
                    }
                };
                
                requestAnimationFrame(animate);
            }
        }

        // æ·»åŠ å¾…åŠäº‹é¡¹çš„å‡½æ•°
        function addTodoItem() {
            // è·å–è¾“å…¥æ¡†ä¸­çš„æ–‡å­—
            const inputText = todoInput.value.trim();
            
            // æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºç©º
            if (inputText === '') {
                // å¯ä»¥æ·»åŠ æç¤ºåŠ¨ç”»
                todoInput.style.borderColor = '#ff6b6b';
                setTimeout(() => {
                    todoInput.style.borderColor = '#FFB6D9';
                }, 1000);
                return;
            }
            
            // ä½¿ç”¨ç»Ÿä¸€çš„åˆ›å»ºå‡½æ•°
            createTodoItemFromData(inputText, false, true); // trueè¡¨ç¤ºéœ€è¦ä¿å­˜
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            todoInput.value = '';
            
            // èšç„¦åˆ°è¾“å…¥æ¡†ï¼Œæ–¹ä¾¿ç»§ç»­è¾“å…¥
            todoInput.focus();
        }

        // ç‚¹å‡»æŒ‰é’®æ—¶æ·»åŠ 
        addButton.addEventListener('click', function() {
            addButton.classList.add('clicked');
            setTimeout(() => {
                addButton.classList.remove('clicked');
            }, 300);
            addTodoItem();
        });

        // æŒ‰Enteré”®æ—¶æ·»åŠ 
        todoInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addButton.classList.add('clicked');
                setTimeout(() => {
                    addButton.classList.remove('clicked');
                }, 300);
                addTodoItem();
            }
        });

        // è¾“å…¥æ¡†éªŒè¯åŠ¨ç”»
        todoInput.addEventListener('input', function() {
            if (this.value.trim() === '') {
                this.classList.remove('shake');
            }
        });

        // åŒå‡»ä»»åŠ¡é¡¹å¯ä»¥ç¼–è¾‘ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
        todoList.addEventListener('dblclick', function(e) {
            const listItem = e.target.closest('li');
            if (listItem && !listItem.classList.contains('empty-message') && e.target.classList.contains('todo-text')) {
                const todoText = e.target;
                const currentText = todoText.textContent;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.value = currentText;
                input.style.cssText = `
                    flex: 1;
                    padding: 5px 10px;
                    border: 2px solid #87D4FF;
                    border-radius: 5px;
                    font-size: 16px;
                    outline: none;
                `;
                
                todoText.style.display = 'none';
                listItem.insertBefore(input, todoText);
                input.focus();
                input.select();
                
                const finishEdit = () => {
                    const newText = input.value.trim();
                    if (newText && newText !== currentText) {
                        todoText.textContent = newText;
                        saveTodos(); // ä¿å­˜ç¼–è¾‘åçš„å†…å®¹
                    }
                    input.remove();
                    todoText.style.display = 'block';
                };
                
                input.addEventListener('blur', finishEdit);
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        finishEdit();
                    }
                });
            }
        });

        // ä»»åŠ¡é¡¹æ‹–æ‹½æ’åºï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
        let draggedElement = null;

        todoList.addEventListener('dragstart', function(e) {
            if (e.target.tagName === 'LI' && !e.target.classList.contains('empty-message')) {
                draggedElement = e.target;
                e.target.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', e.target.innerHTML);
            }
        });

        todoList.addEventListener('dragover', function(e) {
            e.preventDefault();
            const afterElement = getDragAfterElement(todoList, e.clientY);
            const dragging = document.querySelector('.dragging');
            if (dragging) {
                if (afterElement == null) {
                    todoList.appendChild(dragging);
                } else {
                    todoList.insertBefore(dragging, afterElement);
                }
            }
        });

        todoList.addEventListener('dragend', function(e) {
            if (e.target.tagName === 'LI') {
                e.target.classList.remove('dragging');
                // æ‹–æ‹½æ’åºåä¿å­˜
                saveTodos();
            }
        });

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('li:not(.dragging):not(.empty-message)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        // ä¸ºä»»åŠ¡é¡¹æ·»åŠ å¯æ‹–æ‹½å±æ€§
        function makeDraggable(listItem) {
            listItem.draggable = true;
        }

        // æœç´¢åŠŸèƒ½
        function filterTodos() {
            const searchTerm = searchInput.value.trim();
            const searchTermLower = searchTerm.toLowerCase();
            const allItems = todoList.querySelectorAll('li:not(.empty-message)');
            let visibleCount = 0;
            
            // æ˜¾ç¤º/éšè—æ¸…é™¤æŒ‰é’®
            if (searchTerm) {
                clearSearchBtn.style.display = 'flex';
            } else {
                clearSearchBtn.style.display = 'none';
            }
            
            // å…³é—­å¼¹çª—ï¼ˆå¦‚æœæ‰“å¼€ï¼‰
            addTodoModal.style.display = 'none';
            
            if (searchTerm === '') {
                // æ²¡æœ‰æœç´¢è¯ï¼Œæ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®
                allItems.forEach(item => {
                    item.classList.remove('filtered-out');
                    // ç§»é™¤é«˜äº®
                    const todoText = item.querySelector('.todo-text');
                    if (todoText) {
                        todoText.innerHTML = todoText.textContent;
                    }
                    visibleCount++;
                });
                noResults.classList.remove('show');
            } else {
                // æœ‰æœç´¢è¯ï¼Œè¿‡æ»¤é¡¹ç›®
                allItems.forEach(item => {
                    const todoText = item.querySelector('.todo-text');
                    if (todoText) {
                        const text = todoText.textContent.toLowerCase();
                        if (text.includes(searchTermLower)) {
                            // æ˜¾ç¤ºé¡¹ç›®å¹¶é«˜äº®å…³é”®è¯
                            item.classList.remove('filtered-out');
                            highlightText(todoText, searchTermLower);
                            visibleCount++;
                        } else {
                            // éšè—ä¸åŒ¹é…çš„é¡¹ç›®
                            item.classList.add('filtered-out');
                            // ç§»é™¤é«˜äº®
                            todoText.innerHTML = todoText.textContent;
                        }
                    }
                });
                
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…é¡¹ï¼Œæ˜¾ç¤ºå¼¹çª—è¯¢é—®æ˜¯å¦æ·»åŠ 
                if (visibleCount === 0 && searchTerm.length > 0) {
                    // å»¶è¿Ÿæ˜¾ç¤ºå¼¹çª—ï¼Œé¿å…è¾“å…¥è¿‡ç¨‹ä¸­é¢‘ç¹å¼¹å‡º
                    setTimeout(() => {
                        // å†æ¬¡æ£€æŸ¥æ˜¯å¦ä»ç„¶æ²¡æœ‰åŒ¹é…é¡¹ï¼ˆé˜²æ­¢ç”¨æˆ·å¿«é€Ÿè¾“å…¥ï¼‰
                        const currentSearchTerm = searchInput.value.trim();
                        if (currentSearchTerm === searchTerm) {
                            showAddTodoModal(searchTerm);
                        }
                    }, 500); // å»¶è¿Ÿ500msæ˜¾ç¤ºå¼¹çª—
                    noResults.classList.add('show');
                } else {
                    noResults.classList.remove('show');
                }
            }
        }
        
        // æ˜¾ç¤ºæ·»åŠ å¾…åŠå¼¹çª—
        function showAddTodoModal(searchTerm) {
            pendingSearchTerm = searchTerm;
            searchTermText.textContent = searchTerm;
            addTodoModal.style.display = 'flex';
        }
        
        // å…³é—­å¼¹çª—
        function closeModal() {
            addTodoModal.style.display = 'none';
            pendingSearchTerm = '';
        }
        
        // ç¡®è®¤æ·»åŠ 
        function confirmAddTodo() {
            if (pendingSearchTerm) {
                // å°†æœç´¢å…³é”®è¯å¡«å…¥è¾“å…¥æ¡†å¹¶æ·»åŠ 
                todoInput.value = pendingSearchTerm;
                addTodoItem();
                // æ¸…ç©ºæœç´¢æ¡†
                searchInput.value = '';
                clearSearchBtn.style.display = 'none';
                // å…³é—­å¼¹çª—
                closeModal();
                // æ›´æ–°æ˜¾ç¤º
                filterTodos();
            }
        }

        // é«˜äº®æ–‡æœ¬ä¸­çš„å…³é”®è¯
        function highlightText(element, searchTerm) {
            const text = element.textContent;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            const highlightedText = text.replace(regex, '<span class="highlight">$1</span>');
            element.innerHTML = highlightedText;
        }

        // æ¸…é™¤æœç´¢
        function clearSearch() {
            searchInput.value = '';
            clearSearchBtn.style.display = 'none';
            filterTodos();
            searchInput.focus();
        }

        // æœç´¢è¾“å…¥äº‹ä»¶
        searchInput.addEventListener('input', filterTodos);

        // æ¸…é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        clearSearchBtn.addEventListener('click', clearSearch);

        // æŒ‰ESCé”®æ¸…é™¤æœç´¢æˆ–å…³é—­å¼¹çª—
        searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (deleteTodoModal.style.display === 'flex') {
                    closeDeleteModal();
                } else if (addTodoModal.style.display === 'flex') {
                    closeModal();
                } else {
                    clearSearch();
                }
            }
        });
        
        // å¼¹çª—æŒ‰é’®äº‹ä»¶
        confirmAddBtn.addEventListener('click', confirmAddTodo);
        cancelAddBtn.addEventListener('click', closeModal);
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        addTodoModal.addEventListener('click', function(e) {
            if (e.target === addTodoModal) {
                closeModal();
            }
        });
        
        // å¼¹çª—å†…æŒ‰Enterç¡®è®¤æ·»åŠ 
        addTodoModal.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                confirmAddTodo();
            }
        });
        
        // ========== åˆ é™¤ç¡®è®¤å¼¹çª—ç›¸å…³å‡½æ•° ==========
        
        // æ˜¾ç¤ºåˆ é™¤ç¡®è®¤å¼¹çª—
        function showDeleteModal(listItem) {
            // ç¡®ä¿å¼¹çª—åœ¨æœ€ä¸Šå±‚
            deleteTodoModal.style.zIndex = '100001';
            
            const todoTextElement = listItem.querySelector('.todo-text');
            // å¦‚æœtodo-textè¢«é«˜äº®ï¼Œéœ€è¦è·å–åŸå§‹æ–‡æœ¬
            let todoText = '';
            if (todoTextElement) {
                // å¦‚æœæœ‰highlightæ ‡ç­¾ï¼Œæå–æ–‡æœ¬
                const highlightTags = todoTextElement.querySelectorAll('.highlight');
                if (highlightTags.length > 0) {
                    todoText = todoTextElement.textContent; // textContentä¼šè‡ªåŠ¨å»æ‰HTMLæ ‡ç­¾
                } else {
                    todoText = todoTextElement.textContent;
                }
            } else {
                todoText = 'è¯¥å¾…åŠäº‹é¡¹';
            }
            
            pendingDeleteItem = listItem;
            deleteTodoText.textContent = todoText;
            deleteTodoModal.style.display = 'flex';
        }
        
        // å…³é—­åˆ é™¤å¼¹çª—
        function closeDeleteModal() {
            deleteTodoModal.style.display = 'none';
            pendingDeleteItem = null;
        }
        
        // ç¡®è®¤åˆ é™¤
        function confirmDeleteTodo() {
            if (pendingDeleteItem) {
                const itemToDelete = pendingDeleteItem;
                
                // å…³é—­å¼¹çª—
                closeDeleteModal();
                
                // æ‰§è¡Œåˆ é™¤åŠ¨ç”»
                itemToDelete.style.animation = 'slideOut 0.3s ease';
                itemToDelete.style.opacity = '0';
                
                setTimeout(() => {
                    // ç¡®ä¿å…ƒç´ è¿˜åœ¨DOMä¸­æ‰åˆ é™¤
                    if (itemToDelete.parentNode) {
                        itemToDelete.remove();
                        
                        // æ›´æ–°ç»Ÿè®¡
                        updateStats();
                        
                        // ä¿å­˜åˆ°localStorage
                        saveTodos();
                        
                        // å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
                        const remainingItems = todoList.querySelectorAll('li:not(.empty-message)');
                        if (remainingItems.length === 0) {
                            // æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰ç©ºæ¶ˆæ¯
                            const existingEmptyMsg = todoList.querySelector('.empty-message');
                            if (!existingEmptyMsg) {
                                const emptyMsg = document.createElement('li');
                                emptyMsg.className = 'empty-message';
                                emptyMsg.textContent = 'æš‚æ— å¾…åŠäº‹é¡¹ï¼Œæ·»åŠ ä¸€ä¸ªå§ï½';
                                todoList.appendChild(emptyMsg);
                            }
                        }
                        
                        // æ¸…é™¤æœç´¢è¿‡æ»¤ï¼ˆå¦‚æœæ­£åœ¨æœç´¢ï¼‰
                        if (searchInput.value.trim()) {
                            filterTodos();
                        }
                    }
                }, 300);
            }
        }
        
        // åˆ é™¤å¼¹çª—æŒ‰é’®äº‹ä»¶
        confirmDeleteBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            confirmDeleteTodo();
        });
        cancelDeleteBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            closeDeleteModal();
        });
        
        // ç‚¹å‡»åˆ é™¤å¼¹çª—å¤–éƒ¨å…³é—­
        deleteTodoModal.addEventListener('click', function(e) {
            if (e.target === deleteTodoModal) {
                closeDeleteModal();
            }
        });
        
        // åˆ é™¤å¼¹çª—å†…æŒ‰Enterç¡®è®¤åˆ é™¤
        deleteTodoModal.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                confirmDeleteTodo();
            }
        });

        // ========== é¼ æ ‡è¿½è¸ªç‰¹æ•ˆ ==========
        let mouseX = 0;
        let mouseY = 0;
        let lastTrailTime = 0;
        const trailInterval = 50; // è½¨è¿¹é—´éš”ï¼ˆæ¯«ç§’ï¼‰

        // æ›´æ–°é¼ æ ‡ä½ç½®
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            const currentTime = Date.now();
            if (currentTime - lastTrailTime > trailInterval) {
                createSparkleTrail(mouseX, mouseY);
                lastTrailTime = currentTime;
            }
        });

        // åˆ›å»ºäº®æ™¶æ™¶è½¨è¿¹
        function createSparkleTrail(x, y) {
            // ä¸»å…‰ç‚¹
            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            const colors = ['#FFB6D9', '#87D4FF', '#FF8CC8', '#4AB3FF', '#FFD700', '#FF6BB5'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            trail.style.background = `radial-gradient(circle, ${randomColor} 0%, transparent 70%)`;
            trail.style.left = x + 'px';
            trail.style.top = y + 'px';
            trail.style.boxShadow = `0 0 10px ${randomColor}, 0 0 20px ${randomColor}`;
            document.body.appendChild(trail);
            
            setTimeout(() => trail.remove(), 1000);

            // æ˜Ÿæ˜Ÿç‰¹æ•ˆ
            if (Math.random() > 0.7) {
                createStar(x, y);
            }

            // ç²’å­æ•ˆæœ
            if (Math.random() > 0.5) {
                createParticles(x, y);
            }

            // å½©è™¹è½¨è¿¹
            if (Math.random() > 0.8) {
                createRainbowTrail(x, y);
            }
        }

        // åˆ›å»ºæ˜Ÿæ˜Ÿ
        function createStar(x, y) {
            const star = document.createElement('div');
            star.className = 'sparkle-star';
            const stars = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ'];
            star.textContent = stars[Math.floor(Math.random() * stars.length)];
            star.style.left = (x + (Math.random() - 0.5) * 30) + 'px';
            star.style.top = (y + (Math.random() - 0.5) * 30) + 'px';
            star.style.fontSize = (12 + Math.random() * 8) + 'px';
            document.body.appendChild(star);
            
            setTimeout(() => star.remove(), 800);
        }

        // åˆ›å»ºç²’å­
        function createParticles(x, y) {
            const particleCount = 3 + Math.floor(Math.random() * 3);
            const colors = ['#FFB6D9', '#87D4FF', '#FF8CC8', '#4AB3FF', '#FFD700'];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'sparkle-particle';
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = color;
                particle.style.boxShadow = `0 0 6px ${color}`;
                
                const angle = (Math.PI * 2 * i) / particleCount;
                const distance = 20 + Math.random() * 30;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1500);
            }
        }

        // åˆ›å»ºå½©è™¹è½¨è¿¹
        function createRainbowTrail(x, y) {
            const rainbow = document.createElement('div');
            rainbow.className = 'rainbow-trail';
            rainbow.style.left = x + 'px';
            rainbow.style.top = y + 'px';
            document.body.appendChild(rainbow);
            
            setTimeout(() => rainbow.remove(), 600);
        }

        // ç‚¹å‡»æ—¶çš„ç‰¹æ•ˆ - æ‰€æœ‰åœ°æ–¹éƒ½æ˜¾ç¤ºç²‰è‰²é€æ˜æ°”æ³¡
        document.addEventListener('click', (e) => {
            // æ‰€æœ‰ç‚¹å‡»éƒ½åˆ›å»ºç²‰è‰²é€æ˜æ°”æ³¡
            createClickBubble(e.clientX, e.clientY);
        });

        // åˆ›å»ºç‚¹å‡»æ—¶çš„ç²‰è‰²é€æ˜æ°”æ³¡
        function createClickBubble(x, y) {
            // åˆ›å»ºå¤šä¸ªæ°”æ³¡ï¼Œå½¢æˆå±‚æ¬¡æ„Ÿ
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    bubble.className = 'click-bubble';
                    bubble.style.left = x + 'px';
                    bubble.style.top = y + 'px';
                    
                    // æ¯ä¸ªæ°”æ³¡çš„å¤§å°å’Œå»¶è¿Ÿç•¥æœ‰ä¸åŒ
                    const size = 20 + i * 15;
                    const delay = i * 100;
                    bubble.style.width = size + 'px';
                    bubble.style.height = size + 'px';
                    bubble.style.animationDelay = delay + 'ms';
                    
                    // éšæœºåç§»ä½ç½®
                    const offsetX = (Math.random() - 0.5) * 20;
                    const offsetY = (Math.random() - 0.5) * 20;
                    bubble.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
                    
                    document.body.appendChild(bubble);
                    
                    setTimeout(() => {
                        bubble.remove();
                    }, 1000 + delay);
                }, i * 50);
            }
        }

        // ç‚¹å‡»æ—¶çš„é—ªçƒç‰¹æ•ˆ
        function createClickSparkle(x, y) {
            // å¤§æ˜Ÿæ˜Ÿ
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.className = 'twinkle-star';
                    star.textContent = 'âœ¨';
                    const angle = (Math.PI * 2 * i) / 8;
                    const distance = 40;
                    star.style.left = (x + Math.cos(angle) * distance) + 'px';
                    star.style.top = (y + Math.sin(angle) * distance) + 'px';
                    star.style.fontSize = (14 + Math.random() * 6) + 'px';
                    document.body.appendChild(star);
                    
                    setTimeout(() => star.remove(), 1000);
                }, i * 50);
            }

            // å…‰ç‚¹çˆ†ç‚¸
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'sparkle-particle';
                    const colors = ['#FFB6D9', '#87D4FF', '#FF8CC8', '#4AB3FF', '#FFD700', '#FF6BB5'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.background = color;
                    particle.style.boxShadow = `0 0 10px ${color}`;
                    particle.style.width = '6px';
                    particle.style.height = '6px';
                    
                    const angle = (Math.PI * 2 * i) / 15;
                    const distance = 50 + Math.random() * 50;
                    const dx = Math.cos(angle) * distance;
                    const dy = Math.sin(angle) * distance;
                    
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.setProperty('--dx', dx + 'px');
                    particle.style.setProperty('--dy', dy + 'px');
                    
                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 1500);
                }, i * 20);
            }
        }

        // æŒ‰é’®æ‚¬åœæ—¶çš„ç‰¹æ•ˆ
        document.querySelectorAll('button, a, input').forEach(element => {
            element.addEventListener('mouseenter', function(e) {
                const rect = this.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                // åˆ›å»ºå›´ç»•æŒ‰é’®çš„æ˜Ÿæ˜Ÿ
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const star = document.createElement('div');
                        star.className = 'sparkle-star';
                        star.textContent = 'âœ¨';
                        const angle = (Math.PI * 2 * i) / 5;
                        const radius = Math.max(rect.width, rect.height) / 2 + 10;
                        star.style.left = (centerX + Math.cos(angle) * radius) + 'px';
                        star.style.top = (centerY + Math.sin(angle) * radius) + 'px';
                        star.style.fontSize = '12px';
                        document.body.appendChild(star);
                        
                        setTimeout(() => star.remove(), 800);
                    }, i * 100);
                }
            });
        });

        // ä»»åŠ¡é¡¹æ‚¬åœæ—¶çš„ç‰¹æ•ˆ
        document.addEventListener('mouseover', function(e) {
            const listItem = e.target.closest('#todoList li');
            if (listItem && !listItem.classList.contains('empty-message')) {
                const rect = listItem.getBoundingClientRect();
                if (Math.random() > 0.95) { // 5%æ¦‚ç‡åˆ›å»ºç‰¹æ•ˆ
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle-star';
                    sparkle.textContent = 'âœ¨';
                    sparkle.style.left = (rect.left + Math.random() * rect.width) + 'px';
                    sparkle.style.top = (rect.top + Math.random() * rect.height) + 'px';
                    sparkle.style.fontSize = '10px';
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 800);
                }
            }
        });

        // åˆå§‹åŒ–ï¼šåŠ è½½ä¿å­˜çš„å¾…åŠäº‹é¡¹
        loadTodos();

        // åˆå§‹åŒ–ï¼šæ›´æ–°ç»Ÿè®¡
        updateStats();

        // æ·»åŠ åˆ é™¤åŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideOut {
                from {
                    opacity: 1;
                    transform: translateX(0);
                }
                to {
                    opacity: 0;
                    transform: translateX(-100px);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>

